---
layout: page
title: NWS Winds Aloft
---

<section id="nws">
  <article id="winds-aloft">
    <p>This page will display the Winds Aloft Forecast</p>
  </article>
</section>

<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
<script src="https://d3js.org/d3-dsv.v1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/spin.js/2.3.2/spin.min.js"></script>
<script src="js/overlay.js"></script>
<script src="js/nws.js"></script>
<script>

  // for winds aloft see also http://tgftp.nws.noaa.gov/data/raw/fb/


var products = [
  ["FD1", "US1"],
  ["FD3", "US5"],
  ["FD4", "US5"]
]

    overlay.startOverlay(); // initializes overlay and spinner

    getProducts(products[0][0], products[0][1])
      .then(products => {
        // Gets content of most recent product
        return getProduct(products);
      })
      .then(product => {
        var discussionsElement = document.getElementById("winds-aloft");
        text = product.productText;
        console.log(text);
        // Split between header data and table, assumed to be at /n/n
        text = text.split(/\n\n/);
        text[0] = text[0].replace(/\n/g, '<br>');

        data = text[1].split(/\n/);

        data = data.map(row => {

        })
        //data = d3.dsvFormat(" ").parse(text[1]);
        console.log(data);





        text[1] = text[1].replace(/\n/g, '<br>');
        text = text.join('<br><br>');
        console.log(text);

        discussionsElement.innerHTML = text;
        overlay.stopOverlay();
      })
      .catch(err => {
        console.log('Fetch Error:', err);
      });



  // if ("geolocation" in navigator) {
  //   overlay.startOverlay(); // initializes overlay and spinner
  //   console.log('geolocation is available');
  //   navigator.geolocation.getCurrentPosition(success, error, options);
  // } else {
  //   console.log('geolocation IS NOT available');
  // }

  // function success(position) {
  //   console.log('Your current position is:' +
  //     '\nlatitude:  ' + position.coords.latitude +
  //     '\nlongitude: ' + position.coords.longitude +
  //     '\naccuracy:  ' + position.coords.accuracy + ' m' +
  //     '\naltitude:  ' + position.coords.altitude +
  //     ' +/- ' + position.coords.altitudeAccuracy +
  //     '\nheading:   ' + position.coords.heading +
  //     '\nspeed:     ' + position.coords.speed +
  //     '\ntimestamp: ' + position.timestamp);

  //   var latitude = position.coords.latitude;
  //   var longitude = position.coords.longitude;

  //   getStation(latitude, longitude)
  //     .then(cwa => {
  //       // Gets array of available local discussion products
  //       return getProducts('AFD', cwa);
  //     })
  //     .then(discussions => {
  //       // Gets content of most recent discussion product
  //       return getProduct(discussions);
  //     })
  //     .then(discussion => {
  //       var discussionsElement = document.getElementById("discussion");
  //       text = discussion.productText;
  //       text = text.split(/\n\n/);
  //       text[0] = text[0].replace(/\n/g, '<br>');
  //       text[1] = text[1].replace(/\n/g, '<br>');
  //       text = text.join('<br><br>');
  //       discussionsElement.innerHTML = text;
  //       overlay.stopOverlay();
  //     })
  //     .catch(err => {
  //       console.log('Fetch Error:', err);
  //     });
  // };

  // function error(err) {
  //   console.warn(`ERROR(${err.code}): ${err.message}`);
  // };

  // var options = {
  //   enableHighAccuracy: true, // default: false
  //   timeout: 5000, // default: Infinity
  //   maximumAge: 0 // default: 0
  // };
</script>
